/* Base */
*{box-sizing:border-box}
:root{
  --bg:#f5f7fb; --card:#ffffff; --text:#0f172a; --muted:#64748b; --line:#e5e7eb;
  --accent:#ef4444; --accent-600:#dc2626; --primary:#3b82f6; --primary-600:#2563eb;
  --success:#22c55e; --warning:#f59e0b; --danger:#ef4444;
  --radius:16px; --shadow:0 12px 30px rgba(2,6,23,.08);
}
html,body{height:100%}
body {
    margin: 0;
    font-family: 'Inter', 'Tajawal', 'Cairo', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    transition: background .25s ease, color .25s ease;
  }
  
.app{display:grid; grid-template-columns: 270px 1fr; gap:24px; padding:28px; max-width:1180px; margin:0 auto;}
@media (max-width: 920px){ .app{grid-template-columns:1fr; padding:18px;} }

/* Sidebar */
.sidebar{background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px;}
.me{display:flex; align-items:center; gap:12px; margin-bottom:14px}
.avatar{width:38px; height:38px; border-radius:50%; background:linear-gradient(135deg,#f97316,#ef4444);
        color:#fff; display:grid; place-items:center; font-weight:700}
.name{font-weight:700}
.small{font-size:12px; color:var(--muted)}
.side-controls{display:flex; gap:8px; margin: 12px 0 14px}
.ghost{border:1px solid var(--line); background:#f2f4f7; color:#111; padding:8px 10px; border-radius:10px; cursor:pointer}
#language{border:1px solid var(--line); background:#f2f4f7; padding:8px 10px; border-radius:10px; cursor:pointer}

.nav{display:grid; gap:10px}
.nav button{
  display:flex; align-items:center; justify-content:space-between; width:100%;
  padding:11px 12px; border-radius:12px; border:1px solid var(--line);
  background:#f8fafc; color:#0f172a; cursor:pointer; transition:.2s;
}
.nav .left{display:flex; align-items:center; gap:10px}
.nav button.active{background:#eff6ff; border-color:#dbeafe; color:#1e40af}
.pill{background:#e5edff; color:#1e40af; border-radius:999px; padding:2px 8px; font-size:12px; font-weight:700}

/* Main */
.main{background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px}
.toolbar{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
.title{font-size:22px; font-weight:800; margin-inline-end:auto}
.search{position:relative; flex:1 1 280px}
.search input{width:100%; padding:12px 40px; border:1px solid var(--line); border-radius:12px; background:#f8fafc}
.search i{position:absolute; inset-inline-start:12px; top:50%; transform:translateY(-50%); color:#64748b}
.add{background:#f97316; color:#fff; border:none; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer}
.add:hover{filter:brightness(.95)}

.composer{display:grid; grid-template-columns: 1fr 160px 200px 140px; gap:10px; margin:14px 0 12px}
.composer input, .composer select{padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:#fff}
.composer .go{background:var(--primary); color:#fff; border:none; border-radius:12px; font-weight:700; cursor:pointer}
.composer .go:hover{background:var(--primary-600)}
@media (max-width: 780px){ .composer{grid-template-columns: 1fr 1fr; }}

.filters{display:flex; gap:8px; margin: 6px 0 16px}
.filters button{flex:1; border:1px solid var(--line); background:#eef2ff; color:#27336d; padding:8px 10px; border-radius:10px; cursor:pointer}
.filters button.active{background:var(--primary); color:#fff; border-color:transparent}

.list{display:grid; gap:10px}
.task{display:grid; grid-template-columns: 28px 1fr auto; align-items:center; gap:12px; padding:12px; border-radius:12px; border:1px solid var(--line); background:#fff; animation:fadeIn .25s ease}
@keyframes fadeIn{from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:translateY(0)}}
.chk{width:22px; height:22px; border:2px solid #94a3b8; border-radius:6px; display:grid; place-items:center; cursor:pointer}
.chk i{display:none; color:#16a34a}
.task.done .chk i{display:block}
.task.done .titleline{text-decoration:line-through; opacity:.75}
.item-left{display:flex; gap:10px; align-items:flex-start}
.titleline{font-weight:700}
.meta{display:flex; gap:8px; flex-wrap:wrap; margin-top:4px}
.badge{font-size:12px; font-weight:800; padding:3px 8px; border-radius:999px; color:#fff}
.b-low{background:var(--success)}
.b-med{background:var(--warning)}
.b-high{background:var(--danger)}
.due{font-size:12px; color:var(--muted)}

.actions{display:flex; gap:8px}
.iconbtn{border:none; background:#f1f5f9; color:#0f172a; padding:8px 10px; border-radius:10px; cursor:pointer}
.iconbtn:hover{filter:brightness(.95)}

.foot{margin-top:10px; color:var(--muted); text-align:end}

/* Dark mode (GitHub-like) */
body.dark{background:#0d1117}
body.dark .sidebar, body.dark .main{background:#161b22; color:#e6edf3; border:1px solid #30363d}
body.dark .nav button{background:#21262d; color:#e6edf3; border-color:#30363d}
body.dark .nav button.active{background:#1f6feb; color:#fff; border-color:#1f6feb}
body.dark .pill{background:#273a63; color:#cde1ff}
body.dark .ghost, body.dark #language{background:#30363d; color:#e6edf3; border-color:#30363d}
body.dark .composer input, body.dark .composer select{background:#21262d; color:#e6edf3; border-color:#30363d}
body.dark .composer .go{background:#1f6feb}
body.dark .filters button{background:#30363d; color:#e6edf3; border-color:#30363d}
body.dark .filters button.active{background:#1f6feb; color:#fff}
body.dark .task{background:#21262d; border-color:#30363d}
body.dark .search input{background:#21262d; color:#e6edf3; border-color:#30363d}
body.dark .due{color:#9ba5b1}

/* Smooth transitions */
.sidebar,.main,.task,.composer input,.composer select,.filters button,#language,.ghost,.search input{transition: background .2s ease, color .2s ease, border-color .2s ease}

/* RTL tweaks */
html[dir="rtl"] .title{margin-inline-end:0; margin-inline-start:auto}
html[dir="rtl"] .search i{inset-inline-start:auto; inset-inline-end:12px}
html[dir="rtl"] .task{grid-template-columns:auto 1fr 28px}
